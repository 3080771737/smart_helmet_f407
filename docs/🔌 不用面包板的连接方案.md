# 🔌 STM32智能安全帽 - 不用面包板的连接方案

> **适用情况**: 没有面包板，直接使用电源模块的蓝色接线端子供电
> **电源模块**: 面包板专用电源模块（带蓝色接线端子）

---

## 📋 **电源模块接线端子定义**

### **你的电源模块左侧蓝色端子（6个孔）**

```
俯视图：
┌─────────────┐
│ ● ● ● ● ● ●│ ← 蓝色接线端子（螺丝孔）
│ 1 2 3 4 5 6│
└─────────────┘

通常定义：
孔位1: 3.3V 输出
孔位2: 3.3V 输出（与孔位1并联）
孔位3: GND
孔位4: 5V 输出
孔位5: 5V 输出（与孔位4并联）
孔位6: GND（与孔位3并联）

⚠️ 注意：不同厂家的端子定义可能略有不同
建议用万用表先测试一下每个孔的电压！
```

---

## 🔋 **供电分配方案**

### **3.3V输出（孔位1、2）分配给：**

| 模块 | 需要3.3V的引脚 | 连接方式 |
|------|---------------|---------|
| MAX30102 | VCC (1根线) | 插入孔位1 |
| GPS | VCC (1根线) | 插入孔位1 |
| ESP01S | VCC (1根线) | 插入孔位2 |
| ESP01S | EN (1根线) | 插入孔位2 |
| ESP01S | RST (1根线) | 插入孔位2 |

**总共5根线需要接3.3V！**

### **5V输出（孔位4、5）分配给：**

| 模块 | 需要5V的引脚 | 连接方式 |
|------|-------------|---------|
| MQ2 | VCC (1根线) | 插入孔位4 |
| ASR-PRO | VCC (1根线) | 插入孔位5 |

**总共2根线需要接5V**

### **GND（孔位3、6）分配给：**

| 模块 | GND引脚 |
|------|---------|
| MAX30102 | 1根线 |
| MQ2 | 1根线 |
| GPS | 1根线 |
| ESP01S | 1根线 |
| ASR-PRO | 1根线 |
| USB转TTL | 1根线 |

**总共6根线需要接GND！**

---

## ⚠️ **问题：端子孔不够用怎么办？**

### **方案1：多根线共用一个孔（临时方案）**

```
做法：
1. 把多根线的金属头拧在一起
2. 一起插入同一个螺丝孔
3. 用螺丝刀拧紧

示例：
3.3V孔位1需要插3根线 (MAX30102, GPS, ESP01S的VCC)
→ 把3根红色杜邦线的金属头拧在一起
→ 一起插入孔位1
→ 拧紧螺丝

优点：不需要额外购买
缺点：接触不牢固，容易松动
```

### **方案2：使用"Y型"杜邦线转接头（推荐）**

```
购买：Y型杜邦线转接头（1分2或1分3）
价格：约2-5元/个

示例：
3.3V输出需要5根线
→ 买2个"1分3"转接头
→ 电源模块3.3V孔 → 转接头 → 分出3根线
→ 另一个3.3V孔 → 转接头 → 分出2根线

这样就够了！
```

### **方案3：焊接万能板（永久方案）**

```
制作一个供电分配板：
1. 购买万能PCB板（2x3cm即可）
2. 焊接排针和排母
3. 用导线把多个孔连在一起

优点：非常牢固
缺点：需要焊接技能
```

---

## 🔌 **完整接线图（不用面包板）**

### **电源连接**

```
DC 9V适配器
    ↓
┌─────────────────────────┐
│   你的电源模块           │
│   ┌──────┐              │
│   │USB口 │              │
│   └──────┘              │
│   [红色开关]            │
│                         │
│  左侧蓝色接线端子：      │
│  ● ● ● ● ● ●          │
│  1 2 3 4 5 6           │
│  3 3 G 5 5 G           │
│  . . N V V N           │
│  3 3 D   D             │
│  V V                   │
└─────────────────────────┘
   ↓ ↓ ↓ ↓ ↓ ↓
  用杜邦线插入孔中（可能需要多根共用一个孔）
```

### **3.3V分配（孔位1、2）**

```
孔位1（3.3V）:
  ├─ 红线1 → MAX30102 VCC
  ├─ 红线2 → GPS VCC
  └─ 红线3 → ESP01S VCC

孔位2（3.3V）:
  ├─ 红线4 → ESP01S EN
  └─ 红线5 → ESP01S RST

⚠️ 如果一个孔插不下3根线：
选项A：使用Y型转接头
选项B：孔位1插2根，孔位2插3根（重新分配）
```

### **5V分配（孔位4、5）**

```
孔位4（5V）:
  └─ 红线 → MQ2 VCC

孔位5（5V）:
  └─ 红线 → ASR-PRO VCC

✅ 5V只有2根线，孔位够用！
```

### **GND分配（孔位3、6）**

```
孔位3（GND）:
  ├─ 黑线1 → MAX30102 GND
  ├─ 黑线2 → GPS GND
  └─ 黑线3 → ESP01S GND

孔位6（GND）:
  ├─ 黑线4 → MQ2 GND
  ├─ 黑线5 → ASR-PRO GND
  └─ 黑线6 → USB转TTL GND

⚠️ 如果一个孔插不下3根线：
使用Y型转接头或重新分配
```

---

## 📝 **详细接线步骤**

### **第一步：准备材料**

```
需要的杜邦线（公对母）：
- 红色 × 7根（5根3.3V + 2根5V）
- 黑色 × 6根（6个GND）

信号线（公对公）：
- 黄色、绿色、橙色、棕色等各若干
```

### **第二步：连接电源模块到传感器**

#### **1. MAX30102**
```
电源：
  电源模块孔位1(3.3V) → 红线 → MAX30102 VCC
  电源模块孔位3(GND)  → 黑线 → MAX30102 GND

信号：
  MAX30102 SCL → 黄线 → STM32 PB14
  MAX30102 SDA → 绿线 → STM32 PB15
```

#### **2. MQ2**
```
电源：
  电源模块孔位4(5V)  → 红线 → MQ2 VCC
  电源模块孔位6(GND) → 黑线 → MQ2 GND

信号：
  MQ2 AO → 白线 → STM32 PA0
```

#### **3. GPS**
```
电源：
  电源模块孔位1(3.3V) → 红线 → GPS VCC
  电源模块孔位3(GND)  → 黑线 → GPS GND

信号（注意交叉）：
  GPS TX → 橙线 → STM32 PA3 (RX)
  GPS RX → 棕线 → STM32 PA2 (TX)
```

#### **4. ESP01S**
```
电源：
  电源模块孔位2(3.3V) → 红线1 → ESP01S 引脚8(VCC)
  电源模块孔位2(3.3V) → 红线2 → ESP01S 引脚6(EN)
  电源模块孔位2(3.3V) → 红线3 → ESP01S 引脚7(RST)
  电源模块孔位3(GND)  → 黑线  → ESP01S 引脚1(GND)

信号（注意交叉）：
  ESP01S 引脚5(TX) → 蓝线 → STM32 PB11 (RX)
  ESP01S 引脚4(RX) → 紫线 → STM32 PB10 (TX)
```

#### **5. ASR-PRO**
```
电源：
  电源模块孔位5(5V)  → 红线 → ASR-PRO VCC
  电源模块孔位6(GND) → 黑线 → ASR-PRO GND

信号（注意交叉）：
  ASR-PRO TX → 粉线 → STM32 PA10 (RX)
  ASR-PRO RX → 灰线 → STM32 PA9 (TX)
```

#### **6. USB转TTL**
```
电源：
  VCC不接（USB供电）
  电源模块孔位6(GND) → 黑线 → USB转TTL GND

信号（与ASR-PRO共用）：
  USB转TTL TX → STM32 PA10 (RX)
  USB转TTL RX → STM32 PA9 (TX)
```

---

## 🎨 **实物连接示意图**

```
电源模块 (放在桌子上)
┌────────────────────┐
│  ●●●●●●            │ ← 蓝色接线端子
│  123456            │
│                    │
│  [红色开关-打开]   │
│  [USB口或DC输入]   │
└────────────────────┘
    ↓↓↓↓↓↓
  杜邦线飞线
    ↓↓↓↓↓↓

桌面布局：
┌──────────────────────────────────┐
│  [MAX30102]  [GPS]    [ESP01S]   │
│                                  │
│  [ASR-PRO]   [MQ2]               │
│                                  │
│       ↓↓↓ 信号线 ↓↓↓             │
│                                  │
│    [STM32F407开发板]             │
└──────────────────────────────────┘
```

---

## ✅ **检查清单**

### **电源连接检查**
```
□ 孔位1(3.3V)已接: MAX30102, GPS的VCC
□ 孔位2(3.3V)已接: ESP01S的VCC, EN, RST
□ 孔位3(GND)已接: MAX30102, GPS, ESP01S的GND
□ 孔位4(5V)已接: MQ2的VCC
□ 孔位5(5V)已接: ASR-PRO的VCC
□ 孔位6(GND)已接: MQ2, ASR-PRO, USB转TTL的GND
□ 所有螺丝已拧紧
```

### **万用表测试**
```
上电前：
□ 3.3V和GND之间不导通
□ 5V和GND之间不导通

上电后：
□ 孔位1、2 = 3.3V (±0.1V)
□ 孔位4、5 = 5.0V (±0.2V)
□ 孔位3、6 = 0V (GND)
```

### **信号线检查**
```
□ MAX30102 SCL → PB14 ✓
□ MAX30102 SDA → PB15 ✓
□ MQ2 AO → PA0 ✓
□ GPS TX → PA3, RX → PA2 ✓
□ ESP01S TX → PB11, RX → PB10 ✓
□ ASR-PRO TX → PA10, RX → PA9 ✓
```

---

## 💡 **常见问题**

### **Q1: 一个孔插不下多根线怎么办？**
A: 有三种解决方案：
1. 多根线拧在一起插（临时）
2. 买Y型转接头（推荐）
3. 重新分配孔位（例如3.3V的5根线分散到孔位1和孔位2）

### **Q2: 怎么确认孔位的电压定义？**
A: 用万用表测试：
1. 打开电源模块开关
2. 万用表红表笔依次插入每个孔
3. 黑表笔接任意GND孔
4. 读数3.3V的就是3.3V孔，5V的就是5V孔，0V的就是GND孔

### **Q3: 线会不会太乱？**
A: 线路整理技巧：
1. 用扎带把同方向的线捆在一起
2. 用标签纸标记每根线的功能
3. 电源线和信号线分开走
4. 如果太乱，建议花10元买个面包板

### **Q4: 不用面包板会有什么问题吗？**
A: 主要问题：
- 接线端子孔位有限（需要插13根线到6个孔）
- 多根线共用一个孔可能接触不良
- 线路会比较乱，不好排查问题

建议：
- 如果只是临时测试，不用面包板也可以
- 如果要长期使用或做成品，建议买个面包板

---

## 🎉 **总结**

**不用面包板也完全可以！**

关键要点：
1. ✅ 了解你电源模块的端子定义（用万用表测试）
2. ✅ 合理分配13根电源线到6个孔（可能需要多根共用）
3. ✅ 信号线照常连接到STM32
4. ✅ 做好标记和整理

**成本对比：**
- 方案A（不用面包板）：0元（已有电源模块）
- 方案B（用面包板）：10元（买个面包板）

**推荐：**
如果你愿意花10元，还是建议买个面包板，会方便很多！

---

**📅 文档创建**: 2025-12-03
**📧 反馈**: 有问题随时问我！
